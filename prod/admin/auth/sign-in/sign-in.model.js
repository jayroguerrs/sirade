"use strict";import{environment}from"../../../environment.js";var KTSigninGeneral=function(){var e,t,n;return{init:function(){e=document.querySelector("#kt_sign_in_form"),t=document.querySelector("#kt_sign_in_submit"),n=FormValidation.formValidation(e,{fields:{username:{validators:{notEmpty:{message:"El usuario es obligatorio"},stringLength:{min:8,max:20,message:"El usuario debe tener entre 8 y 20 caracteres"}}},password:{validators:{notEmpty:{message:"La contraseña es obligatorio"},stringLength:{min:8,max:20,message:"La contraseña debe tener entre 8 y 20 caracteres"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row"})}}),t.addEventListener("click",(function(r){r.preventDefault(),n.validate().then((function(r){if("Valid"==r){msgLoad("Procesando..."),t.setAttribute("data-kt-indicator","on"),t.disabled=!0;let r=new FormData(e);fetch(`${environment.apiSRD}/API/auth/sign-in`,{method:"POST",body:r}).then((e=>e.json())).then((r=>{1===r.estado||2===r.estado?msgSuccess("","Bienvenido(a): "+r.data.nombres,(()=>{e.querySelector('[name="username"]').value="",e.querySelector('[name="password"]').value="",n.resetForm(),location.reload()})):(msgError("Usuario o contraseña incorrectos",(()=>{}),(()=>{})),n.resetForm()),e.reset(),t.removeAttribute("data-kt-indicator"),t.disabled=!1}))}}))}))}}}();KTUtil.onDOMContentLoaded((function(){KTSigninGeneral.init()}));