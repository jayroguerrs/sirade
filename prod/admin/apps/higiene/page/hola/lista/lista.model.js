"use strict";var cargarURL=function(){fetch("../config.json").then((e=>e.json())).then((e=>{window.host=e.URL,KTNuevaEvaluacion.init()})).catch((e=>{console.error("Error al cargar el archivo JSON:",e)}))},KTNuevaEvaluacion=function(){var e,o,a;$("[name='periodo']").on("select2:select",(function(e){const o={id_usuario:document.querySelector("#session_usuario_id").value,id_periodo:$("[name='periodo']").val()},a=new URLSearchParams(o).toString(),t=`${window.host}/API/jci/servicios/combo-servicios?${a}`;fetch(t,{method:"GET"}).then((e=>e.json())).then((e=>{if(1==e.estado){$("#servicio").empty();e.data.forEach((e=>{$("[name='servicio']").append(new Option(e.nom_area,e.id_area))})),$("[name='servicio']").prop("disabled",!1),$("[name='servicio']").val(""),$("[name='servicio']").trigger("change")}else $("[name='servicio']").prop("disabled",!0)}))})),$("[name='servicio']").on("select2:select",(function(e){const o={id_usuario:document.querySelector("#session_usuario_id").value,id_periodo:$("[name='periodo']").val(),id_servicio:$("[name='servicio']").val()},a=new URLSearchParams(o).toString(),t=`${window.host}/API/jci/personal/combo-colaborador?${a}`;fetch(t,{method:"GET"}).then((e=>e.json())).then((e=>{if(1==e.estado){$("#colaborador").empty();e.data.forEach((e=>{const o=new Option(e.nom_colaborador,e.id_colaborador);o.setAttribute("data-encuesta",e.id_encuesta),$("[name='colaborador']").append(o)})),$("[name='colaborador']").prop("disabled",!1),$("[name='colaborador']").val(""),$("[name='colaborador']").trigger("change")}else $("[name='colaborador']").prop("disabled",!0)}))}));return{init:function(){a=document.querySelector("#formEvaluacion"),e=document.getElementById("kt_contact_submit_button"),o=FormValidation.formValidation(a,{fields:{name:{validators:{notEmpty:{message:"Name is required"}}},subject2:{validators:{notEmpty:{message:"Name is required"}}},email:{validators:{notEmpty:{message:"Email address is required"},emailAddress:{message:"The value is not a valid email address"}}},message:{validators:{notEmpty:{message:"Message is required"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),e.addEventListener("click",(function(a){a.preventDefault(),o&&o.validate().then((function(o){console.log("validated!"),"Valid"==o?(e.setAttribute("data-kt-indicator","on"),e.disabled=!0,setTimeout((function(){e.removeAttribute("data-kt-indicator"),e.disabled=!1,Swal.fire({text:"Form has been successfully submitted!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then((function(e){e.isConfirmed}))}),2e3)):Swal.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then((function(e){KTUtil.scrollTop()}))}))}))}}}();KTUtil.onDOMContentLoaded((function(){cargarURL()}));